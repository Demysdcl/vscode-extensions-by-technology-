(()=>{var t={530:function(t){t.exports=function(){"use strict";var t="millisecond",e="second",n="minute",s="hour",i="day",r="week",o="month",a="quarter",u="year",c="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f=function(t,e,n){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(n)+t},g={s:f,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),s=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+f(s,2,"0")+":"+f(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var s=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(s,o),r=n-i<0,a=e.clone().add(s+(r?-1:1),o);return+(-(s+(n-i)/(r?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:o,y:u,w:r,d:i,D:c,h:s,m:n,s:e,ms:t,Q:a}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p="en",m={};m[p]=h;var v=function(t){return t instanceof b},y=function(t,e,n){var s;if(!t)return p;if("string"==typeof t)m[t]&&(s=t),e&&(m[t]=e,s=t);else{var i=t.name;m[i]=t,s=i}return!n&&s&&(p=s),s||!n&&p},w=function(t,e){if(v(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new b(n)},$=g;$.l=y,$.i=v,$.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var b=function(){function h(t){this.$L=y(t.locale,null,!0),this.parse(t)}var f=h.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if($.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(l);if(s){var i=s[2]-1||0,r=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],i,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],i,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return $},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},f.isAfter=function(t,e){return w(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<w(t)},f.$g=function(t,e,n){return $.u(t)?this[e]:this.set(n,t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,a){var l=this,d=!!$.u(a)||a,h=$.p(t),f=function(t,e){var n=$.w(l.$u?Date.UTC(l.$y,e,t):new Date(l.$y,e,t),l);return d?n:n.endOf(i)},g=function(t,e){return $.w(l.toDate()[t].apply(l.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(e)),l)},p=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case u:return d?f(1,0):f(31,11);case o:return d?f(1,m):f(0,m+1);case r:var w=this.$locale().weekStart||0,b=(p<w?p+7:p)-w;return f(d?v-b:v+(6-b),m);case i:case c:return g(y+"Hours",0);case s:return g(y+"Minutes",1);case n:return g(y+"Seconds",2);case e:return g(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(r,a){var l,d=$.p(r),h="set"+(this.$u?"UTC":""),f=(l={},l[i]=h+"Date",l[c]=h+"Date",l[o]=h+"Month",l[u]=h+"FullYear",l[s]=h+"Hours",l[n]=h+"Minutes",l[e]=h+"Seconds",l[t]=h+"Milliseconds",l)[d],g=d===i?this.$D+(a-this.$W):a;if(d===o||d===u){var p=this.clone().set(c,1);p.$d[f](g),p.init(),this.$d=p.set(c,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](g);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[$.p(t)]()},f.add=function(t,a){var c,l=this;t=Number(t);var d=$.p(a),h=function(e){var n=w(l);return $.w(n.date(n.date()+Math.round(e*t)),l)};if(d===o)return this.set(o,this.$M+t);if(d===u)return this.set(u,this.$y+t);if(d===i)return h(1);if(d===r)return h(7);var f=(c={},c[n]=6e4,c[s]=36e5,c[e]=1e3,c)[d]||1,g=this.$d.getTime()+t*f;return $.w(g,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",s=$.z(this),i=this.$locale(),r=this.$H,o=this.$m,a=this.$M,u=i.weekdays,c=i.months,l=function(t,s,i,r){return t&&(t[s]||t(e,n))||i[s].substr(0,r)},h=function(t){return $.s(r%12||12,t,"0")},f=i.meridiem||function(t,e,n){var s=t<12?"AM":"PM";return n?s.toLowerCase():s},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:$.s(a+1,2,"0"),MMM:l(i.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:l(i.weekdaysMin,this.$W,u,2),ddd:l(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(r),HH:$.s(r,2,"0"),h:h(1),hh:h(2),a:f(r,o,!0),A:f(r,o,!1),m:String(o),mm:$.s(o,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:s};return n.replace(d,(function(t,e){return e||g[t]||s.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,c,l){var d,h=$.p(c),f=w(t),g=6e4*(f.utcOffset()-this.utcOffset()),p=this-f,m=$.m(this,f);return m=(d={},d[u]=m/12,d[o]=m,d[a]=m/3,d[r]=(p-g)/6048e5,d[i]=(p-g)/864e5,d[s]=p/36e5,d[n]=p/6e4,d[e]=p/1e3,d)[h]||p,l?m:$.a(m)},f.daysInMonth=function(){return this.endOf(o).$D},f.$locale=function(){return m[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),s=y(t,e,!0);return s&&(n.$L=s),n},f.clone=function(){return $.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},h}(),S=b.prototype;return w.prototype=S,[["$ms",t],["$s",e],["$m",n],["$H",s],["$W",i],["$M",o],["$y",u],["$D",c]].forEach((function(t){S[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,b,w),t.$i=!0),w},w.locale=y,w.isDayjs=v,w.unix=function(t){return w(1e3*t)},w.en=m[p],w.Ls=m,w.p={},w}()},664:function(t){t.exports=function(){"use strict";return function(t,e,n){var s=e.prototype,i=s.format;n.en.ordinal=function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"},s.format=function(t){var e=this,n=this.$locale(),s=this.$utils(),r=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|zzz|z|gggg|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return n.ordinal(e.$D);case"gggg":return e.weekYear();case"wo":return n.ordinal(e.week(),"W");case"w":case"ww":return s.s(e.week(),"w"===t?1:2,"0");case"k":case"kk":return s.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}));return i.bind(this)(r)}}}()},703:function(t){t.exports=function(){"use strict";return function(t,e,n){t=t||{};var s=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};n.en.relativeTime=i;var r=function(e,s,r,o){for(var a,u,c,l=r.$locale().relativeTime||i,d=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],h=d.length,f=0;f<h;f+=1){var g=d[f];g.d&&(a=o?n(e).diff(r,g.d,!0):r.diff(e,g.d,!0));var p=(t.rounding||Math.round)(Math.abs(a));if(c=a>0,p<=g.r||!g.r){p<=1&&f>0&&(g=d[f-1]);var m=l[g.l];u="string"==typeof m?m.replace("%d",p):m(p,s,g.l,c);break}}if(s)return u;var v=c?l.future:l.past;return"function"==typeof v?v(u):v.replace("%s",u)};s.to=function(t,e){return r(t,e,this,!0)},s.from=function(t,e){return r(t,e,this)};var o=function(t){return t.$u?n.utc():n()};s.toNow=function(t){return this.to(o(this),t)},s.fromNow=function(t){return this.from(o(this),t)}}}()}},e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={exports:{}};return t[s].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t{constructor(t){this.method=t}}class e{constructor(t){this.method=t}}function s(t,e,n){n(e.params)}const i=new t("configuration/didChange"),r=new e("webview/ready"),o=new e("configuration/update"),a=new e("configuration/preview"),u=new t("configuration/didPreview"),c=(new t("settings/jumpTo"),new t("rebase/change"),new e("rebase/start"),new e("rebase/abort"),new e("rebase/disable"),new e("rebase/change/entry"),new e("rebase/move/entry"),/^(?:(#?)([0-9a-f]{3}|[0-9a-f]{6})|((?:rgb|hsl)a?)\((-?\d+%?)[,\s]+(-?\d+%?)[,\s]+(-?\d+%?)[,\s]*(-?[\d.]+%?)?\))$/i);function l(t,e){const n=t+e,s=e<0?n<0?0:n:n>255?255:n;return Math.round(s)}function d(t,e){return h(t,-e)}function h(t,e){const n=g(t);if(null==n)return t;const[s,i,r,o]=n,a=255*e/100;return`rgba(${l(s,a)}, ${l(i,a)}, ${l(r,a)}, ${o})`}function f(t,e){const n=g(t);if(null==n)return t;const[s,i,r,o]=n;return`rgba(${s}, ${i}, ${r}, ${o*(e/100)})`}function g(t){t=t.trim();const e=c.exec(t);if(null==e)return null;if("#"===e[1]){const t=e[2];switch(t.length){case 3:return[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),1];case 6:return[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16),1]}return null}switch(e[3]){case"rgb":return[parseInt(e[4],10),parseInt(e[5],10),parseInt(e[6],10),1];case"rgba":return[parseInt(e[4],10),parseInt(e[5],10),parseInt(e[6],10),parseFloat(e[7])];default:return null}}let p=0;var m;!function(t){t.on=function(t,e,n,s,i){let r=!1;if("string"==typeof t){const o=(null!=i?i:document).querySelectorAll(t);for(const t of o)t.addEventListener(e,n,null!=s&&s);return{dispose:()=>{if(!r){r=!0;for(const t of o)t.removeEventListener(e,n,null!=s&&s)}}}}return t.addEventListener(e,n,null!=s&&s),{dispose:()=>{r||(r=!0,t.removeEventListener(e,n,null!=s&&s))}}}}(m||(m={}));var v=n(530),y=n.n(v),w=n(664),$=n.n(w),b=n(703),S=n.n(b);y().extend($()),y().extend(S());const _=(k=new Date("Wed Jul 25 2018 19:18:00 GMT-0400"),y()(k));var k;let M=0;function P(t){return"true"===t||"false"!==t&&("null"===t?null:t)}function x(t,e,n){const s=e.split("."),i=s.length,r=i-1;let o=-1,a=t;for(;null!=a&&++o<i;){const t=s[o];let e=n;if(o!==r){const n=a[t];e="object"==typeof n?n:{}}a[t]=e,a=a[t]}return t}function D(t){const[e,n,s]=t.trim().split(/([=+!])/);return[e.trim(),void 0!==n?n.trim():"=",void 0!==s?s.trim():s]}function I(t,e){const n={};for(const s in t){const i=t[s];Array.isArray(i)||("object"==typeof i?Object.assign(n,I(i,void 0===e?s:`${e}.${s}`)):n[void 0===e?s:`${e}.${s}`]=i)}return n}function O(t){switch(t){case"on":return!0;case"null":return null;case"undefined":return;default:return t}}function V(t,e){return t+Math.random()*(e-t)}class T{constructor(){this.alpha=0,this.radius=0,this.x=0,this.y=0,this._vx=0,this._vy=0,this.reset()}reset(){this.alpha=V(.1,.9),this.radius=V(1,4),this.x=V(0,window.innerWidth),this.y=V(0,-window.innerHeight),this._vx=V(-3,3),this._vy=V(2,5)}update(){this.x+=this._vx,this.y+=this._vy,this.y+this.radius>window.innerHeight&&this.reset()}}class A{constructor(t=!0){var e,n,s;if(this.snowing=t,this._height=0,this._width=0,this._snowflakes=[],this._clearBound=this.clear.bind(this),this._updateBound=this.update.bind(this),this._canvas=null!==(e=document.querySelector("canvas.snow"))&&void 0!==e?e:void 0,this._ctx=null!==(s=null===(n=this._canvas)||void 0===n?void 0:n.getContext("2d"))&&void 0!==s?s:void 0,null==this._ctx)return;const i=document.querySelector(".snow__trigger");null!=i&&i.addEventListener("click",(()=>this.onToggle(!this.snowing))),window.addEventListener("resize",(()=>this.onResize())),this.onResize(),this.onToggle(t)}onToggle(t){this.snowing=t,document.body.classList.toggle("snowing",this.snowing),this.snowing&&(this.createSnowflakes(),requestAnimationFrame(this._updateBound))}onResize(){null!=this._canvas&&(this._height=window.innerHeight,this._width=window.innerWidth,this._canvas.width=this._width,this._canvas.height=this._height)}clear(){null!=this._canvas&&null!=this._ctx&&(this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._snowflakes.length=0)}createSnowflakes(){const t=window.innerWidth/4;for(let e=0;e<t;e++)this._snowflakes.push(new T)}update(){if(null==this._ctx)return;this._ctx.clearRect(0,0,this._width,this._height);const t=document.body.classList.contains("vscode-light")?"#424242":"#fff";for(const e of this._snowflakes)e.update(),this._ctx.save(),this._ctx.fillStyle=t,this._ctx.beginPath(),this._ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),this._ctx.closePath(),this._ctx.globalAlpha=e.alpha,this._ctx.fill(),this._ctx.restore();requestAnimationFrame(this.snowing?this._updateBound:this._clearBound)}}new class extends class extends class{constructor(t,e){this.appName=t,this.log(`${this.appName}.ctor`),this._api=acquireVsCodeApi(),function(){const t=()=>{const t=document.body,e=window.getComputedStyle(t),n=t.style,s=e.getPropertyValue("--vscode-font-family").trim();s?(n.setProperty("--font-family",s),n.setProperty("--font-size",e.getPropertyValue("--vscode-font-size").trim()),n.setProperty("--font-weight",e.getPropertyValue("--vscode-font-weight").trim())):(n.setProperty("--font-family",e.getPropertyValue("--vscode-editor-font-family").trim()),n.setProperty("--font-size",e.getPropertyValue("--vscode-editor-font-size").trim()),n.setProperty("--font-weight",e.getPropertyValue("--vscode-editor-font-weight").trim()));let i=e.getPropertyValue("--vscode-editor-background").trim();n.setProperty("--color-background",i),n.setProperty("--color-background--lighten-05",h(i,5)),n.setProperty("--color-background--darken-05",d(i,5)),n.setProperty("--color-background--lighten-075",h(i,7.5)),n.setProperty("--color-background--darken-075",d(i,7.5)),n.setProperty("--color-background--lighten-15",h(i,15)),n.setProperty("--color-background--darken-15",d(i,15)),n.setProperty("--color-background--lighten-30",h(i,30)),n.setProperty("--color-background--darken-30",d(i,30)),n.setProperty("--color-background--lighten-50",h(i,50)),n.setProperty("--color-background--darken-50",d(i,50)),i=e.getPropertyValue("--vscode-button-background").trim(),n.setProperty("--color-button-background",i),n.setProperty("--color-button-background--darken-30",d(i,30)),i=e.getPropertyValue("--vscode-button-secondaryBackground").trim(),n.setProperty("--color-button-secondary-background",i),n.setProperty("--color-button-secondary-background--darken-30",d(i,30)),i=e.getPropertyValue("--vscode-button-background").trim(),n.setProperty("--color-highlight",i),n.setProperty("--color-highlight--75",f(i,75)),n.setProperty("--color-highlight--50",f(i,50)),n.setProperty("--color-highlight--25",f(i,25)),i=e.getPropertyValue("--vscode-button-foreground").trim(),n.setProperty("--color-button-foreground",i),i=e.getPropertyValue("--vscode-editor-foreground").trim(),i||(i=e.getPropertyValue("--vscode-foreground").trim()),n.setProperty("--color-foreground",i),n.setProperty("--color-foreground--85",f(i,85)),n.setProperty("--color-foreground--75",f(i,75)),n.setProperty("--color-foreground--65",f(i,65)),n.setProperty("--color-foreground--50",f(i,50)),i=e.getPropertyValue("--vscode-focusBorder").trim(),n.setProperty("--color-focus-border",i),i=e.getPropertyValue("--vscode-textLink-foreground").trim(),n.setProperty("--color-link-foreground",i),n.setProperty("--color-link-foreground--darken-20",d(i,20)),n.setProperty("--color-link-foreground--lighten-20",h(i,20))};new MutationObserver(t).observe(document.body,{attributes:!0,attributeFilter:["class"]}),t()}(),this.state=e,setTimeout((()=>{var t,e;this.log(`${this.appName}.initializing`),null===(t=this.onInitialize)||void 0===t||t.call(this),this.bind(),null!=this.onMessageReceived&&window.addEventListener("message",this.onMessageReceived.bind(this)),this.sendCommand(r,{}),null===(e=this.onInitialized)||void 0===e||e.call(this),setTimeout((()=>{document.body.classList.remove("preload")}),500)}),0)}bind(){var t,e;null===(t=this.bindDisposables)||void 0===t||t.forEach((t=>t.dispose())),this.bindDisposables=null===(e=this.onBind)||void 0===e?void 0:e.call(this)}log(t){console.log(t)}getState(){return this._api.getState()}sendCommand(t,e){return this.postMessage({id:(p===Number.MAX_SAFE_INTEGER?p=1:p++,`webview:${p}`),method:t.method,params:e})}setState(t){this.state=t,this._api.setState(t)}postMessage(t){this._api.postMessage(t)}}{constructor(t,e){super(t,e),this._changes=Object.create(null),this._updating=!1}onInitialized(){this.updateState()}onBind(){var t,e;const n=null!==(e=null===(t=super.onBind)||void 0===t?void 0:t.call(this))&&void 0!==e?e:[],s=this;return n.push(m.on("input[type=checkbox][data-setting]","change",(function(){return s.onInputChecked(this)})),m.on("input[type=text][data-setting], input[type=number][data-setting], input:not([type])[data-setting]","blur",(function(){return s.onInputBlurred(this)})),m.on("input[type=text][data-setting], input[type=number][data-setting], input:not([type])[data-setting]","focus",(function(){return s.onInputFocused(this)})),m.on("input[type=text][data-setting][data-setting-preview], input[type=number][data-setting][data-setting-preview]","input",(function(){return s.onInputChanged(this)})),m.on("select[data-setting]","change",(function(){return s.onInputSelected(this)})),m.on(".popup","mousedown",(function(t){return s.onPopupMouseDown(this,t)}))),n}onMessageReceived(t){const e=t.data;switch(e.method){case i.method:s(0,e,(t=>{this.state.config=t.config,this.state.customSettings=t.customSettings,this.updateState()}));break;default:void 0!==super.onMessageReceived&&super.onMessageReceived(t)}}applyChanges(){this.sendCommand(o,{changes:{...this._changes},removes:Object.keys(this._changes).filter((t=>void 0===this._changes[t])),scope:this.getSettingsScope()}),this._changes=Object.create(null)}getSettingsScope(){return"user"}onInputBlurred(t){this.log(`${this.appName}.onInputBlurred: name=${t.name}, value=${t.value}`);const e=document.getElementById(`${t.name}.popup`);null!=e&&e.classList.add("hidden");let n=t.value;null!=n&&0!==n.length||(n=t.dataset.defaultValue,void 0===n&&(n=null)),this._changes[t.name]="number"===t.type&&null!=n?Number(n):n,this.applyChanges()}onInputChanged(t){if(!this._updating)for(const e of document.querySelectorAll(`span[data-setting-preview="${t.name}"]`))this.updatePreview(e,t.value)}onInputChecked(t){var e,n;if(!this._updating){switch(this.log(`${this.appName}.onInputChecked: name=${t.name}, checked=${t.checked}, value=${t.value}`),t.dataset.settingType){case"object":{const n=t.name.split("."),s=n.splice(0,1)[0],i=null!==(e=this.getSettingValue(s))&&void 0!==e?e:Object.create(null);t.checked?x(i,n.join("."),O(t.value)):x(i,n.join("."),!1),this._changes[s]=i;break}case"array":{const e=null!==(n=this.getSettingValue(t.name))&&void 0!==n?n:[];if(Array.isArray(e)){if(t.checked)e.includes(t.value)||e.push(t.value);else{const n=e.indexOf(t.value);-1!==n&&e.splice(n,1)}this._changes[t.name]=e}break}case"custom":this._changes[t.name]=t.checked;break;default:t.checked?this._changes[t.name]=O(t.value):this._changes[t.name]=null!=t.dataset.valueOff&&t.dataset.valueOff}this.setAdditionalSettings(t.checked?t.dataset.addSettingsOn:t.dataset.addSettingsOff),this.applyChanges()}}onInputFocused(t){this.log(`${this.appName}.onInputFocused: name=${t.name}, value=${t.value}`);const e=document.getElementById(`${t.name}.popup`);if(null!=e){if(0===e.childElementCount){const t=document.querySelector("#token-popup"),n=document.importNode(t.content,!0);e.appendChild(n)}e.classList.remove("hidden")}}onInputSelected(t){if(this._updating)return;const e=t.options[t.selectedIndex].value;this.log(`${this.appName}.onInputSelected: name=${t.name}, value=${e}`),this._changes[t.name]=P(e),this.applyChanges()}onPopupMouseDown(t,e){e.preventDefault();const n=e.target;(null==n?void 0:n.matches("[data-token]"))&&this.onTokenMouseDown(n,e)}onTokenMouseDown(t,e){var n;if(this._updating)return;this.log(`${this.appName}.onTokenClicked: id=${t.id}`);const s=t.closest(".setting");if(null==s)return;const i=s.querySelector("input[type=text], input:not([type])");if(null==i)return;const r=`\${${t.dataset.token}}`;let o=i.selectionStart;null!=o?(i.value=`${i.value.substring(0,o)}${r}${i.value.substr(null!==(n=i.selectionEnd)&&void 0!==n?n:o)}`,o+=r.length):o=i.value.length,i.focus(),i.setSelectionRange(o,o),o===i.value.length&&(i.scrollLeft=i.scrollWidth),setTimeout((()=>this.onInputChanged(i)),0),setTimeout((()=>i.focus()),250),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}evaluateStateExpression(t,e){var n,s;let i=!1;for(const r of t.trim().split("&")){const[t,o,a]=D(r);switch(o){case"=":{let s=e[t];void 0===s&&(s=null!==(n=this.getSettingValue(t))&&void 0!==n&&n),i=void 0!==a?a===String(s):Boolean(s);break}case"!":{let n=e[t];void 0===n&&(n=null!==(s=this.getSettingValue(t))&&void 0!==s&&s),i=void 0!==a?a!==String(n):!n;break}case"+":if(void 0!==a){const e=this.getSettingValue(t);i=void 0!==e&&e.includes(a.toString())}}if(!i)break}return i}getCustomSettingValue(t){var e;return null===(e=this.state.customSettings)||void 0===e?void 0:e[t]}getSettingValue(t){const e=this.getCustomSettingValue(t);return null!=e?e:function(t,e){return e.split(".").reduce(((t={},e)=>null==t?void 0:t[e]),t)}(this.state.config,t)}updateState(){var t,e,n,s;this._updating=!0;try{for(const s of document.querySelectorAll("input[type=checkbox][data-setting]"))if("custom"===s.dataset.settingType)s.checked=null!==(t=this.getCustomSettingValue(s.name))&&void 0!==t&&t;else if("array"===s.dataset.settingType)s.checked=(null!==(e=this.getSettingValue(s.name))&&void 0!==e?e:[]).includes(s.value);else if(null!=s.dataset.valueOff){const t=this.getSettingValue(s.name);s.checked=s.dataset.valueOff!==t}else s.checked=null!==(n=this.getSettingValue(s.name))&&void 0!==n&&n;for(const t of document.querySelectorAll("input[type=text][data-setting], input[type=number][data-setting], input:not([type])[data-setting]"))t.value=null!==(s=this.getSettingValue(t.name))&&void 0!==s?s:"";for(const t of document.querySelectorAll("select[data-setting]")){const e=this.getSettingValue(t.name),n=t.querySelector(`option[value='${e}']`);null!=n&&(n.selected=!0)}for(const t of document.querySelectorAll("span[data-setting-preview]"))this.updatePreview(t)}finally{this._updating=!1}const i=I(this.state.config);this.setVisibility(i),this.setEnablement(i)}setAdditionalSettings(t){if(!t)return;const e=function(t){return t.trim().split(",").map((t=>{const[e,n]=t.split("=");return[e,P(n)]}))}(t);for(const[t,n]of e)this._changes[t]=n}setEnablement(t){for(const e of document.querySelectorAll("[data-enablement]")){const n=!this.evaluateStateExpression(e.dataset.enablement,t);if(n?e.setAttribute("disabled",""):e.removeAttribute("disabled"),e.matches("input,select"))e.disabled=n;else{const t=e.querySelector("input,select");if(null==t)continue;t.disabled=n}}}setVisibility(t){for(const e of document.querySelectorAll("[data-visibility]"))e.classList.toggle("hidden",!this.evaluateStateExpression(e.dataset.visibility,t))}updatePreview(t,e){switch(t.dataset.settingPreviewType){case"date":void 0===e&&(e=this.getSettingValue(t.dataset.settingPreview)),null!=e&&0!==e.length||(e=t.dataset.settingPreviewDefault),t.innerText=null==e?"":_.format(e);break;case"commit":{if(void 0===e&&(e=this.getSettingValue(t.dataset.settingPreview)),null!=e&&0!==e.length||(e=t.dataset.settingPreviewDefault),null==e)return void(t.innerText="");const n=(M===Number.MAX_SAFE_INTEGER?M=1:M++,`${M}`),i=m.on(window,"message",(e=>{const r=e.data;r.method===u.method&&r.params.id===n&&(i.dispose(),s(0,r,(e=>{var n;t.innerText=null!==(n=e.preview)&&void 0!==n?n:""})))}));this.sendCommand(a,{key:t.dataset.settingPreview,type:"commit",id:n,format:e});break}}}}{constructor(){super("WelcomeApp",window.bootstrap),window.bootstrap=void 0}},requestAnimationFrame((()=>new A))})()})();
//# sourceMappingURL=welcome.js.map